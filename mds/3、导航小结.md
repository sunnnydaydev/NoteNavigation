# 导航总结

NavController是NavHost内的一个成员，页面间的跳转由NavController来控制完成。NavController提供了不同navigate重载方法，代表着页面跳转的不同
实现方式。

###### 1、NavController的获取

根据所处的位置不同，我们获取NavController的方式也有所不同一般有三种获取方式：


```kotlin
Fragment.findNavController()

View.findNavController()

Activity.findNavController(viewId: Int)
```

```java
NavHostFragment.findNavController(Fragment)
        
Navigation.findNavController(Activity, @IdRes int viewId)
        
Navigation.findNavController(View)
```

###### 2、常见的导航方式

（1）使用资源id进行导航

```kotlin
navigate(@IdRes resId: Int)
```
直接通过资源Id进行导航即可。资源Id支持actionId 或者 目的地fragmentId。

（2）Safe Args 进行导航

一般不建议使用资源Id进行导航，因为使用资源id进行导航时若是传递参数可能是不安全的，navigation建议使用Safe Args 进行导航。使用Safe Args进行
导航时系统会自动生成对应的导航类、导航方法，当有跳转参数传递时也会自动生成跳转参数。相对来说封装后让我们使用起来更加效率。

```kotlin
navigate(directions: NavDirections)
```
这个在[1、Navigation入门篇.md](1、Navigation入门篇.md)中已经介绍。

 (3)导航选项NavOptions
 
在导航过程中会伴有操作栈、动画的操作，若使用代码的话可以使用NavOptions类来控制。

```kotlin
    val navOptions =  NavOptions.Builder()
    .setEnterAnim(R.anim.from_right) //进入动画
    .setExitAnim(R.anim.to_left)    //退出动画
    .setPopEnterAnim(R.anim.to_left)    //弹出进入动画
    .setPopExitAnim(R.anim.from_right)  //弹出退出动画
    .build()

    public open fun navigate(@IdRes resId: Int, args: Bundle?, navOptions: NavOptions?)
    
```

当然上述的动画我们也可以在导航图中xml方式进行配置。进入action节点进行配置即可。

（4)deeplink进行导航

```kotlin
navigate(deepLink: Uri)
```

DeepLink有两种创建方式，分别为显式deepLink、隐式deepLink，创建好之后便可处理deepLink。



###### 3、导航相关的返回栈

       基础
       支持多个返回栈